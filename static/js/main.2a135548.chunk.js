(this["webpackJsonpse-image"]=this["webpackJsonpse-image"]||[]).push([[0],{103:function(e,t,a){"use strict";a.r(t);var c=a(0),r=a.n(c),n=a(34),i=a.n(n),o=(a(94),a(52)),s=a(13),l=a(80),u=function(e,t){return{X:e,Y:t}},d=function(e,t){return{X:e.X*t,Y:e.Y*t}},x=function(e,t,a){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.1;return a||(a=t),{TextureSize:t,SurfaceSize:a,SufaceName:e,FontSize:c}},j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{BlockName:e,TextSurfaces:Array(t)}},b={X:512,Y:512},h=j("LCD Panel"),f=j("Wide LCD Panel"),g=j("Large Corner LCD"),S=j("Small Corner LCD"),m=j("Text Panel"),O=j("Large Programmable Block",2),p=j("Small Programmable Block",2),v=j("Console Block",4),T=j("Fighter Cockpit",6),C=j("Large Cockpit",6),B=j("Small Cockpit",4),y=j("Large Industrial Cockpit",6),k=j("Small Industrial Cockpit",5),N=j("Flight Seat"),L=j("Control Station");h.TextSurfaces[0]=x("ScreenArea",b),f.TextSurfaces[0]=x("ScreenArea",u(1024,512)),g.TextSurfaces[0]=x("ScreenArea",b,u(512,86),.4),S.TextSurfaces[0]=x("ScreenArea",b,u(512,144),.2),m.TextSurfaces[0]=x("ScreenArea",b,u(512,307.2)),O.TextSurfaces[0]=x("Large Display",b,u(512,320)),O.TextSurfaces[1]=x("Keyboard",b,u(512,204.8)),p.TextSurfaces[0]=x("Large Display",d(b,.5)),p.TextSurfaces[1]=x("Keyboard",u(256,128),u(256,90.09091)),v.TextSurfaces[0]=x("Projection Area",u(512,512),u(512,512)),v.TextSurfaces[1]=x("Large Display",u(256,256),u(256,175)),v.TextSurfaces[2]=x("Numpad",u(128,128),u(85.33334,128)),v.TextSurfaces[3]=x("Keyboard",u(256,128),u(256,128)),T.TextSurfaces[0]=x("Top Center Screen",u(256,256),u(256,153.6)),T.TextSurfaces[1]=x("Top Left Screen",u(128,128),u(128,85.33334)),T.TextSurfaces[2]=x("Top Right Screen",u(128,128),u(128,85.33334)),T.TextSurfaces[3]=x("Keyboard",u(256,128),u(256,109.7143)),T.TextSurfaces[4]=x("Bottom Center Screen",u(256,256),u(204.8,256)),T.TextSurfaces[5]=x("Numpad",u(128,128),u(102.4,128)),C.TextSurfaces[0]=x("Top Center Screen",u(256,256),u(256,177.2308)),C.TextSurfaces[1]=x("Top Left Screen",u(256,256),u(256,192)),C.TextSurfaces[2]=x("Top Right Screen",u(256,256),u(256,192)),C.TextSurfaces[3]=x("Keyboard",u(256,256),u(256,146.2857)),C.TextSurfaces[4]=x("Bottom Left Screen",u(256,256),u(256,199.1111)),C.TextSurfaces[5]=x("Bottom Right Screen",u(256,256),u(256,199.1111)),B.TextSurfaces[0]=x("Top Center Screen",u(256,256),u(256,256)),B.TextSurfaces[1]=x("Top Left Screen",u(256,256),u(256,192)),B.TextSurfaces[2]=x("Top Right Screen",u(256,256),u(256,192)),B.TextSurfaces[3]=x("Keyboard",u(256,256),u(256,139.6364)),y.TextSurfaces[0]=x("Large Display",u(256,256),u(256,153.6)),y.TextSurfaces[1]=x("Top Left Screen",u(256,256),u(256,179.2)),y.TextSurfaces[2]=x("Top Center Screen",u(256,256),u(256,179.2)),y.TextSurfaces[3]=x("Top Right Screen",u(256,256),u(256,153.6)),y.TextSurfaces[4]=x("Keyboard",u(256,256),u(256,153.6)),y.TextSurfaces[5]=x("Numpad",u(256,256),u(204.8,256)),k.TextSurfaces[0]=x("Top Left Screen",u(256,256),u(256,182.8571)),k.TextSurfaces[1]=x("Top Center Screen",u(256,256),u(256,170.6667)),k.TextSurfaces[2]=x("Top Right Screen",u(256,256),u(256,182.8571)),k.TextSurfaces[3]=x("Keyboard",u(256,128),u(256,128)),k.TextSurfaces[4]=x("Numpad",u(128,128),u(106.6667,128)),N.TextSurfaces[0]=x("Large Display",u(512,128),u(512,113.7778)),L.TextSurfaces[0]=x("Large Display",u(512,512),u(512,307.2));var R=[h,f,g,S,m,O,p,v,T,C,B,y,k,N,L],w={};R.forEach((function(e){return w[e.BlockName]=e}));var D=function(e,t){return{R:e.R+t.R,G:e.G+t.G,B:e.B+t.B,A:e.A}},A=function(e,t){return{R:Math.round(e.R*t),G:Math.round(e.G*t),B:Math.round(e.B*t),A:e.A}},I=function(e,t,a,c){return{R:e,G:t,B:a,A:c}},F=255/7,Y={FloydSteinberg:[[7,0,1],[1,1,1],[5,1,0],[3,1,-1]],JuNiNi:[[7,0,1],[5,0,2],[3,1,-2],[5,1,-1],[7,1,0],[5,1,1],[3,1,2],[1,2,-2],[3,2,-1],[5,2,0],[3,2,1],[1,2,2]],Stucci:[[8,0,1],[4,0,2],[2,1,-2],[4,1,-1],[8,1,0],[4,1,1],[2,1,2],[1,2,-2],[2,2,-1],[4,2,0],[2,2,1],[1,2,2]],Sierra3:[[5,0,1],[3,0,2],[2,1,-2],[4,1,-1],[5,1,0],[4,1,1],[2,1,2],[2,2,-1],[3,2,0],[2,2,1]],Sierra2:[[4,0,1],[3,0,2],[1,1,-2],[2,1,-1],[3,1,0],[2,1,1],[1,1,2]],SierraLite:[[2,0,1],[1,1,-1],[1,1,0]]},X=function(e,t,a){var c=4*(a*e.width+t);return c>=e.data.length-4?I(0,0,0,0):I(e.data[c],e.data[c+1],e.data[c+2],e.data[c+3])},P=function(e,t,a,c){var r=4*(a*e.width+t);if(r>=e.data.length-4)return I(0,0,0,0);e.data[r]=c.R,e.data[r+1]=c.G,e.data[r+2]=c.B,e.data[r+3]=c.A},M=function(e,t,a){var c=(Math.round(e/F)<<6)+(Math.round(t/F)<<3)+Math.round(a/F);return String.fromCharCode(57600+c)},G=a(154),W=a(158),z=a(156),K=a(167),E=a(164),H=a(168),J=a(169),U=a(170),q=a(160),Q=a(161),V=a(153),Z=a(159),$=a(173),_=a(157),ee=a(174),te=a(162),ae=a(79),ce=a(1),re=Object(G.a)({app:{display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",height:"100vh",background:"#555555"},boxCenter:{display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"},imageBox:{margin:"5px",padding:"10px"},configBox:{margin:"5px",padding:"10px"},colorPicker:{width:"100px !important",height:"100px !important"},selectBox:{minWidth:256,minHeight:256,display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"},resultBox:{margin:"5px",padding:"10px"},resultString:{maxWidth:256,maxHeight:200,overflow:"hidden"}});var ne=function(){var e=re(),t=Object(c.useRef)(null),a=r.a.useState(!1),n=Object(s.a)(a,2),i=n[0],x=n[1],j=r.a.useState(""),f=Object(s.a)(j,2),g=f[0],S=f[1],m=r.a.useState("success"),O=Object(s.a)(m,2),p=O[0],v=O[1],T=Object(c.useState)("FloydSteinberg"),C=Object(s.a)(T,2),B=C[0],y=C[1],k=Object(c.useState)(h),N=Object(s.a)(k,2),L=N[0],G=N[1],ne=Object(c.useState)(L.TextSurfaces[0]),ie=Object(s.a)(ne,2),oe=ie[0],se=ie[1],le=Object(c.useState)(""),ue=Object(s.a)(le,2),de=ue[0],xe=ue[1],je=Object(c.useState)(!1),be=Object(s.a)(je,2),he=be[0],fe=be[1],ge=Object(c.useState)(u(0,0)),Se=Object(s.a)(ge,2),me=Se[0],Oe=Se[1],pe=Object(c.useState)(u(0,0)),ve=Object(s.a)(pe,2),Te=ve[0],Ce=ve[1],Be=Object(c.useState)(u(0,0)),ye=Object(s.a)(Be,2),ke=ye[0],Ne=ye[1],Le=Object(c.useState)("#000000"),Re=Object(s.a)(Le,2),we=Re[0],De=Re[1],Ae=Object(c.useState)(null),Ie=Object(s.a)(Ae,2),Fe=Ie[0],Ye=Ie[1],Xe=Object(c.useState)(""),Pe=Object(s.a)(Xe,2),Me=Pe[0],Ge=Pe[1],We=Object(c.useState)(!1),ze=Object(s.a)(We,2),Ke=ze[0],Ee=ze[1];Object(c.useEffect)((function(){var e=b.X/Math.min(oe.TextureSize.X,oe.TextureSize.Y),t=d(oe.SurfaceSize,.3472222222222222*e);t.X=Math.round(t.X),t.Y=Math.round(t.Y),Ne(t),0!==Te.X&&0!==Te.Y||(Oe(u(0,0)),Ce(t)),console.log("Updated size to ".concat(t.X," : ").concat(t.Y))}),[Te,oe]),Object(c.useEffect)((function(){navigator.permissions.query({name:"clipboard-write"}).then((function(e){Ee("granted"===e.state||"prompt"===e.state),console.log("Clipboard grant: ".concat("granted"===e.state||"prompt"===e.state))}))})),Object(c.useEffect)((function(){if(t.current){var e=t.current,a=e.getContext("2d"),c=Y[B],r=e.width,n=e.height;if(Fe){a.fillStyle=we,a.fillRect(0,0,r,n);var i=me.X,o=me.Y,s=Te.X,l=Te.Y;he&&(i=0,o=0,s=r,l=n),a.drawImage(Fe,i,o,s,l),function(e,t,a){a||(a=I(0,0,0,255));for(var c,r,n,i=e.getContext("2d"),o=i.getImageData(0,0,e.width,e.height),s=e.width,l=e.height,u=function(e){for(var t=0,a=0;a<e[0].length;a++)t+=e[a][0];return t}(t),d=0;d<s;d++)for(var x=0;x<l;x++){var j=X(o,d,x),b=(n=j,I(Math.round(n.R/F)*F,Math.round(n.G/F)*F,Math.round(n.B/F)*F,n.A)),h=(r=b,{R:(c=j).R-r.R,G:c.G-r.G,B:c.B-r.B,A:c.A});j.A<36?(P(o,d,x,a),h=a):P(o,d,x,b);for(var f=0;f<t[0].length;f++){var g=t[f][0]/u,S=t[f][1]+d,m=t[f][2]+x,O=X(o,S,m),p=A(h,g);P(o,S,m,D(O,p))}}i.putImageData(o,0,0)}(e,c),xe(function(e,t){for(var a="",c=e.getContext("2d").getImageData(0,0,e.width,e.height),r=c.width,n=c.height,i=0;i<n;i++){for(var o=0;o<r;o++){var s=X(c,i,o);a+=s.A>=36?M(s.R,s.G,s.B):"#"}i+1<n&&(a+="\n")}return a+"SEI".concat(t)}(e,"Size: ".concat(r,"x").concat(n," - from Teske's Lab & Whiplash141")))}else{a.fillStyle="#FFFFFF",a.fillRect(0,0,r,n),a.fillStyle="#333333",a.font="15px Arial";var u=a.measureText("Load an image");a.fillText("Load an image",(r-u.width)/2,(n-15)/2)}}}),[B,we,he,me,Te,Fe,ke]);var He=Object(c.useCallback)((function(e){if(1===e.length){console.log("Loading image ".concat(e[0]));var t=new FileReader;t.onload=function(){var e=new Image;e.src=t.result,Ge(t.result),e.onload=function(){return Ye(e)},v("success"),S("Loaded image"),x(!0)},t.readAsDataURL(e[0])}else S("Please select a single image"),v("error"),x(!0)}),[]),Je=Object(l.a)({onDrop:He}),Ue=Je.getRootProps,qe=Je.getInputProps,Qe=Je.isDragActive,Ve=function(e,t){"clickaway"!==t&&x(!1)},Ze=function(e,t){if(!isNaN(t))switch(e){case"x":Oe(u(t,me.Y));break;case"y":Oe(u(me.X,t));break;case"w":Ce(u(t,Te.Y));break;case"h":Ce(u(Te.Y,t))}};return Object(ce.jsxs)("div",{className:e.app,children:[Object(ce.jsx)(W.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:i,autoHideDuration:2e3,onClose:Ve,children:Object(ce.jsx)(z.a,{onClose:Ve,severity:p,sx:{width:"100%"},children:g})}),Object(ce.jsx)(K.a,{children:Object(ce.jsxs)(E.a,{container:!0,children:[Object(ce.jsx)(E.a,{item:!0,xs:2}),Object(ce.jsxs)(E.a,{item:!0,xs:4,children:[Object(ce.jsxs)(H.a,{className:e.imageBox,children:[Object(ce.jsx)(J.a,{children:Object(ce.jsx)(U.a,{gutterBottom:!0,variant:"h5",component:"div",children:"Original Image"})}),Object(ce.jsx)("div",Object(o.a)(Object(o.a)({},Ue()),{},{className:e.selectBox,style:{border:Qe?"2px dashed green":"2px dashed grey"},children:""!==Me?Object(ce.jsxs)("div",{children:[Object(ce.jsx)("input",Object(o.a)({},qe())),Object(ce.jsx)("img",{alt:"original",src:Me,style:{maxHeight:160,maxWidth:160}})]}):Object(ce.jsxs)("div",{children:[Object(ce.jsx)("input",Object(o.a)({},qe())),Object(ce.jsx)("p",{children:"Drop the image here or click to load"})]})}))]}),Object(ce.jsxs)(H.a,{className:e.imageBox,children:[Object(ce.jsx)(J.a,{children:Object(ce.jsx)(U.a,{gutterBottom:!0,variant:"h5",component:"div",children:"Preview"})}),Object(ce.jsx)("div",{className:e.selectBox,children:Object(ce.jsx)("canvas",{ref:t,width:ke.X,height:ke.Y})})]})]}),Object(ce.jsxs)(E.a,{item:!0,xs:6,children:[Object(ce.jsxs)(H.a,{className:e.configBox,children:[Object(ce.jsx)(J.a,{children:Object(ce.jsx)(U.a,{gutterBottom:!0,variant:"h5",component:"div",children:"Configuration"})}),Object(ce.jsxs)(E.a,{container:!0,children:[Object(ce.jsx)(E.a,{item:!0,xs:6,children:Object(ce.jsxs)("div",{className:e.selectBox,children:[Object(ce.jsxs)(q.a,{sx:{m:1,minWidth:200},children:[Object(ce.jsx)(Q.a,{id:"block-label",children:"Block"}),Object(ce.jsx)(V.a,{labelId:"block-label",id:"block-selector",value:L.BlockName,label:"Block Type",onChange:function(e){console.log("Changing block to ".concat(e.target.value));var t=w[e.target.value];t&&(G(t),se(t.TextSurfaces[0]))},children:R.map((function(e){return Object(ce.jsx)(Z.a,{value:e.BlockName,children:e.BlockName})}))})]}),Object(ce.jsxs)(q.a,{sx:{m:1,minWidth:200},children:[Object(ce.jsx)(Q.a,{id:"surface-label",children:"Surface"}),Object(ce.jsx)(V.a,{labelId:"surface-label",id:"surface-selector",value:oe.SufaceName,label:"Surface",onChange:function(e){L.TextSurfaces.forEach((function(t){(null===t||void 0===t?void 0:t.SufaceName)===e.target.value&&se(t)}))},children:L.TextSurfaces.map((function(e){return Object(ce.jsx)(Z.a,{value:e.SufaceName,children:e.SufaceName})}))})]}),Object(ce.jsxs)(q.a,{sx:{m:1,minWidth:200},children:[Object(ce.jsx)(Q.a,{id:"filter-label",children:"Dither Filter"}),Object(ce.jsx)(V.a,{labelId:"filter-label",id:"filter-selector",value:B,label:"Dither Filter",onChange:function(e){y(e.target.value.toString())},children:Object.keys(Y).map((function(e){return Object(ce.jsx)(Z.a,{value:e,children:e})}))})]})]})}),Object(ce.jsxs)(E.a,{item:!0,xs:6,children:[Object(ce.jsx)(q.a,{sx:{m:1,minWidth:200},children:Object(ce.jsx)($.a,{control:Object(ce.jsx)(_.a,{}),onChange:function(e,t){fe(t)},label:"Stretch"})}),Object(ce.jsx)(ee.a,{children:Object(ce.jsxs)(E.a,{container:!0,children:[Object(ce.jsx)(E.a,{item:!0,xs:3,children:Object(ce.jsx)(te.a,{onChange:function(e){return Ze("x",parseInt(e.target.value))},value:me.X,disabled:he,label:"X",variant:"outlined"})}),Object(ce.jsx)(E.a,{item:!0,xs:3,children:Object(ce.jsx)(te.a,{onChange:function(e){return Ze("y",parseInt(e.target.value))},value:me.Y,disabled:he,label:"Y",variant:"outlined"})}),Object(ce.jsxs)(E.a,{item:!0,xs:3,children:[" ",Object(ce.jsx)(te.a,{onChange:function(e){return Ze("w",parseInt(e.target.value))},value:Te.X,disabled:he,label:"W",variant:"outlined"})]}),Object(ce.jsx)(E.a,{item:!0,xs:3,children:Object(ce.jsx)(te.a,{onChange:function(e){return Ze("h",parseInt(e.target.value))},value:Te.Y,disabled:he,label:"H",variant:"outlined"})})]})}),he?Object(ce.jsx)("div",{}):Object(ce.jsxs)("div",{className:e.boxCenter,children:[Object(ce.jsx)(U.a,{gutterBottom:!0,variant:"h5",component:"div",children:"Background Color"}),Object(ce.jsx)(ae.a,{className:e.colorPicker,color:we,onChange:De})]})]})]})]}),Object(ce.jsxs)(H.a,{className:e.resultBox,children:[Object(ce.jsx)(J.a,{children:Object(ce.jsx)(U.a,{gutterBottom:!0,variant:"h5",component:"div",children:"Result Text"})}),Object(ce.jsxs)("div",{className:e.selectBox,children:[Object(ce.jsx)(U.a,{variant:"body2",color:"text.secondary",children:""!==de?"Click below to copy":"Waiting for image"}),Object(ce.jsx)("div",{className:e.resultString,children:Object(ce.jsx)("pre",{onClick:function(e){var t=window.getSelection(),a=document.createRange();a.selectNodeContents(e.target),t.removeAllRanges(),t.addRange(a),Ke?navigator.clipboard.writeText(de).then((function(){})):document.execCommand("copy"),S("copied to clipboard"),x(!0)},children:de})})]})]})]})]})})]})},ie=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,175)).then((function(t){var a=t.getCLS,c=t.getFID,r=t.getFCP,n=t.getLCP,i=t.getTTFB;a(e),c(e),r(e),n(e),i(e)}))};i.a.render(Object(ce.jsx)(r.a.StrictMode,{children:Object(ce.jsx)(ne,{})}),document.getElementById("root")),ie()},94:function(e,t,a){}},[[103,1,2]]]);
//# sourceMappingURL=main.2a135548.chunk.js.map